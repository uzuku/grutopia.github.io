


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Run Benchmark Baseline &mdash; GRUtopia v2.0.2 documentation</title>
  

  <link rel="shortcut icon" href="../_static/images/logo192.png" />
  
  

  

  
  
  

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/readthedocs.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="How to Use Controller" href="../tutorials/how-to-use-controller.html" />
  <link rel="prev" title="Teleoperating with VisionPro" href="teleoperating-with-visionpro.html" />
  <!-- Google Analytics -->
  <script type="text/javascript">
    var collapsedSections = [];
  </script>
  
  <!-- End Google Analytics -->
  

  
  <script src="../_static/js/modernizr.min.js"></script>
  <script>
    MathJax = {
        chtml: {
            scale: 1,
            minScale: 1,
        },
        svg: {
            scale: 1,
            minScale: 1,
        }
    }
</script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href=""
        aria-label="OpenRobotLab"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://github.com/OpenRobotLab/GRUtopia.git" target="_blank">GitHub</a>
          </li>
          <li >
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a
                class="resource-option with-down-arrow">
                OpenRobotLab
              </a>
              <div class="resources-dropdown-menu">
                <a class="doc-dropdown-option nav-dropdown-item"
                  href="https://github.com/OpenRobotLab" target="_blank">
                  <span class="dropdown-title">GitHub </span>
                  <p></p>
                </a>
              </div>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>
  </div>
</div>

<body class="pytorch-body">

   

  

  <div class="table-of-contents-link-wrapper">
    <span>Table of Contents</span>
    <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
  </div>

  <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
    <div class="pytorch-side-scroll">
      <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <div class="pytorch-left-menu-search">
          

          
          
          
          

          



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        
        
        
        
        
        <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="wander-with-keyboard.html">Wander with keyboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-use-grscenes.html">How to Use GRscenes</a></li>
<li class="toctree-l1"><a class="reference internal" href="teleoperating-with-mocap.html">Teleoperating with Mocap</a></li>
<li class="toctree-l1"><a class="reference internal" href="teleoperating-with-visionpro.html">Teleoperating with VisionPro</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run Benchmark Baseline</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/how-to-use-controller.html">How to Use Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/how-to-use-sensor.html">How to Use Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/how-to-use-robot.html">How to Use Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/how-to-use-task.html">How to Use Task</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/how-to-add-robot.html">How to Add Custom Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/how-to-add-controller.html">How to Add Custom Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/how-to-add-sensor.html">How to Add Custom Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/how-to-add-task.html">How to Add Custom Task</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/env.html">grutopia.core.env</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/register.html">grutopia.core.register</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/robot.html">grutopia.core.robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/scene.html">grutopia.core.scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/task.html">grutopia.core.task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/util.html">grutopia.core.util</a></li>
</ul>

        
        
      </div>
    </div>
  </nav>

  <div class="pytorch-container">
    <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
      <div class="pytorch-breadcrumbs-wrapper">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../index.html">
            Docs
        </a> &gt;
      </li>

        
      <li>Run Benchmark Baseline</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            
            
        
      </li>
      
    
  </ul>

  
</div>
      </div>

      <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
        Shortcuts
      </div>
    </div>

    <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
      <div class="pytorch-content-left">
        
          <div class="rst-content">
            
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
              <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
                
                
  <section id="run-benchmark-baseline">
<h1>Run Benchmark Baseline<a class="headerlink" href="#run-benchmark-baseline" title="Permalink to this heading">¶</a></h1>
<p>NOTE: Benchmark baseline can only be run with the source code of GRUtopia currently. If GRUtopia is installed through pip, you must clone the repository of GRUtopia first.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:OpenRobotLab/GRUtopia.git
</pre></div>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The system overview when running the benchmark baseline is as follows:</p>
<img src="../_static/image/agent_baseline.png" width="400">
<p>The agent runs as a separate process with its own python virtual environment, and currently it communicates with the simulation env process through HTTP localhost.</p>
<p>If you are running GRUtopia in a container, a separate container is recommended for running the agent, and make sure they are in the same network namespace (that is, the containers can connect to each other through localhost).</p>
<p>For social-navigation/mobile-manipulation benchmark, both the agent process and simulation env process require 16GB+ VRAM separately. We’ve tested them on a host with 2 RTX 4090 equipped, one for the baseline agent process and one for the simulation env process, and you can take it as a spec reference.</p>
<p><strong>Hardware requirements:</strong></p>
<ol class="arabic simple">
<li><p>At least 2 RTX-4090 on the same host (or other RTX GPU with equivalent VRAM resource).</p></li>
<li><p>64GB+ RAM</p></li>
</ol>
<p>Generally, running benchmark with our agent baseline including the following steps:</p>
<ol class="arabic simple">
<li><p>Start the baseline agent process.</p></li>
<li><p>Generate config for all episodes.</p></li>
<li><p>Run all episodes in simulation.</p></li>
</ol>
<hr class="docutils" />
<p><strong>NOTE</strong>: Agents implementations are currently in the directory <a class="reference external" href="https://github.com/OpenRobotLab/GRUtopia/tree/main/grutopia_extension/agents"><code class="docutils literal notranslate"><span class="pre">GRUtopia/grutopia_extension/agents/</span></code></a>. They may be migrated to a separate repo in the future.</p>
</section>
<section id="social-navigation">
<h2>Social Navigation<a class="headerlink" href="#social-navigation" title="Permalink to this heading">¶</a></h2>
<section id="start-baseline-agent-for-social-navigation-benchmark">
<h3>1 Start Baseline Agent For Social Navigation Benchmark<a class="headerlink" href="#start-baseline-agent-for-social-navigation-benchmark" title="Permalink to this heading">¶</a></h3>
<section id="install-dependencies-for-agent">
<h4>1.1 Install Dependencies for Agent<a class="headerlink" href="#install-dependencies-for-agent" title="Permalink to this heading">¶</a></h4>
<p>Create a new conda/venv env (for agent), and then install the dependencies within the env:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># make sure your cuda toolkit version matches your pytorch cuda version</span>
<span class="nb">cd</span><span class="w"> </span>grutopia_extension/agents/social_navigation_agent
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Tmux is required for running the agent entrypoint script. You can install it by:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>tmux
</pre></div>
</div>
</section>
<section id="install-submodules">
<h4>1.2 Install Submodules<a class="headerlink" href="#install-submodules" title="Permalink to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/social_navigation_agent</span>
mkdir<span class="w"> </span>images
<span class="c1"># Please make sure your torch cuda version is equal with your cuda version</span>
<span class="c1"># GroundingDINO</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/IDEA-Research/GroundingDINO.git

<span class="c1"># YOLOv7</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/WongKinYiu/yolov7.git
</pre></div>
</div>
<p>The directory structure of the submodules is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── social_navigation_agent
│   │   ├── GroundingDINO                            # GroundingDINO repo
│   │   ├── images                                   # Empty directory
│   │   └── yolov7                                   # yolov7 repo
</pre></div>
</div>
</section>
<section id="download-model-weights">
<h4>1.3 Download Model Weights<a class="headerlink" href="#download-model-weights" title="Permalink to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/social_navigation_agent</span>
mkdir<span class="w"> </span>data
<span class="nb">cd</span><span class="w"> </span>data
</pre></div>
</div>
<p>Download the necessary model weights from the provided sources and place them in an accessible directory within the
project, put them under the data folder. These weights are essential for running the models.</p>
<ul class="simple">
<li><p>MobileSAM: Download mobile_sam.pt from the <a class="reference external" href="https://github.com/ChaoningZhang/MobileSAM/blob/master/weights/mobile_sam.pt">MobileSAM GitHub Repository</a>.</p></li>
<li><p>GroundingDINO: Download groundingdino_swint_ogc.pth from
the <a class="reference external" href="https://github.com/IDEA-Research/GroundingDINO/releases/download/v0.1.0-alpha2/groundingdino_swinb_cogcoor.pth">GroundingDINO GitHub Repository</a>.</p></li>
<li><p>YOLOv7: Download yolov7-e6e.pt from the <a class="reference external" href="https://github.com/WongKinYiu/yolov7/releases/download/v0.1/yolov7-e6e.pt">YOLOv7 GitHub Repository</a>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── social_navigation_agent
│   │   ├── data
│   │   │   ├── groundingdino_swint_ogc.pth
│   │   │   ├── mobile_sam.pt
│   │   │   └── yolov7-e6e.pt
</pre></div>
</div>
</section>
<section id="configure-api-keys">
<h4>1.4 Configure API Keys<a class="headerlink" href="#configure-api-keys" title="Permalink to this heading">¶</a></h4>
<p>Put your API keys under <code class="docutils literal notranslate"><span class="pre">./modules/vlm/api_key</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── social_navigation_agent
│   │   ├── modules
│   │   │   └── vlm
│   │   │   │   └── api_key
│   │   │   │   │   ├── azure_api_key.txt
│   │   │   │   │   └── azure_api_key_e.txt
</pre></div>
</div>
<p>As mentioned above:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">azure_api_key.txt</span></code>: The API key for the Azure OpenAI <code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code> model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">azure_api_key_e.txt</span></code>: The API key for the Azure OpenAI <code class="docutils literal notranslate"><span class="pre">text-embedding-3-large</span></code> embedding model.</p></li>
</ul>
<p>You can learn how to get the keys through this <a class="reference external" href="https://learn.microsoft.com/zh-cn/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions">link</a>.</p>
</section>
<section id="run-the-agent-process">
<h4>1.5 Run the Agent Process<a class="headerlink" href="#run-the-agent-process" title="Permalink to this heading">¶</a></h4>
<p>Launch the agent process</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/social_navigation_agent</span>
./scripts/launch_vlm_servers.sh
</pre></div>
</div>
</section>
</section>
<section id="generate-episodes-config-for-social-navigation-task">
<h3>2. Generate episodes config for social navigation task<a class="headerlink" href="#generate-episodes-config-for-social-navigation-task" title="Permalink to this heading">¶</a></h3>
<p>A python script <a class="reference external" href="https://github.com/OpenRobotLab/GRUtopia/blob/main/grutopia_extension/agents/social_navigation_agent/generate_sn_episodes.py"><code class="docutils literal notranslate"><span class="pre">generate_sn_episodes.py</span></code></a> is provided to generate episodes config for social navigation task. Currently it generates a python entrypoint file for each episode, since our env does not fully support multiple episodes yet. For example, if there’s 30 episodes to run for the benchmark, 30 python scripts will be generated, and each python script contains the full process to run one episode in simulation Env.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate episodes config for social navigation task</span>
<span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
<span class="nb">cd</span><span class="w"> </span>..
python<span class="w"> </span>GRUtopia/grutopia_extension/agents/social_navigation_agent/generate_sn_episodes.py<span class="w"> </span>--help<span class="w">  </span><span class="c1"># See options when generating episodes config</span>
python<span class="w"> </span>GRUtopia/grutopia_extension/agents/social_navigation_agent/generate_sn_episodes.py
</pre></div>
</div>
<p>If no options are provided, the generated scripts will be saved in <code class="docutils literal notranslate"><span class="pre">./sn_episodes</span></code>. You can override the path when generating (see <code class="docutils literal notranslate"><span class="pre">--help</span></code>).</p>
</section>
<section id="run-the-episodes-in-simulation-env">
<h3>3 Run the Episodes in Simulation Env<a class="headerlink" href="#run-the-episodes-in-simulation-env" title="Permalink to this heading">¶</a></h3>
<p>Open a new session and switch to the python virtual environment for simulation env, which is the one you created when <a class="reference internal" href="installation.html"><span class="std std-doc">install GRUtopia</span></a>.</p>
<p>First install the dependencies required for running the benchmark:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements/benchmark.txt
</pre></div>
</div>
<p>It may take quite a long time to run all the episodes. You can verify the setting by running the demo episode first:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
<span class="nb">cd</span><span class="w"> </span>..
python<span class="w"> </span>GRUtopia/grutopia/demo/h1_social_navigation.py
</pre></div>
</div>
<p>If the demo episode runs successfully, you can run all the episodes in the benchmark by running all the python scripts generated in step 2. The scripts can also be distributed to different machines and run in parallel as long as the agent process is started on these machines (since currently the two processes can only communicated through localhost…).</p>
<p>Currently, the process and logic of running benchmark baseline is quite rough, and we are continuously working on optimizing it.</p>
</section>
</section>
<section id="mobile-manipulation">
<h2>Mobile Manipulation<a class="headerlink" href="#mobile-manipulation" title="Permalink to this heading">¶</a></h2>
<section id="start-baseline-agent-for-mobile-manipulation-benchmark">
<h3>1 Start Baseline Agent For Mobile Manipulation Benchmark<a class="headerlink" href="#start-baseline-agent-for-mobile-manipulation-benchmark" title="Permalink to this heading">¶</a></h3>
<section id="install-environment-dependencies">
<h4>1.1 Install Environment Dependencies<a class="headerlink" href="#install-environment-dependencies" title="Permalink to this heading">¶</a></h4>
<p>Create a new conda/venv env (for agent), and then install the dependencies within the env:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># make sure your cuda toolkit version matches your pytorch cuda version</span>
<span class="nb">cd</span><span class="w"> </span>grutopia_extension/agents/mobile_manipulation_agent
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Tmux is required for running the agent entrypoint script. You can install it by:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>tmux
</pre></div>
</div>
</section>
<section id="id1">
<h4>1.2 Install Submodules<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/mobile_manipulation_agent</span>
mkdir<span class="w"> </span>images
<span class="c1"># Please make sure your torch cuda version is equal with your cuda version</span>
<span class="c1"># GroundingDINO</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/IDEA-Research/GroundingDINO.git

<span class="c1"># YOLOv7</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/WongKinYiu/yolov7.git
</pre></div>
</div>
<p>The directory structure of the submodules are as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── mobile_manipulation_agent
│   │   ├── GroundingDINO                            # GroundingDINO repo
│   │   ├── images                                   # Empty directory
│   │   └── yolov7                                   # yolov7 repo
</pre></div>
</div>
</section>
<section id="id2">
<h4>1.3 Download Model Weights<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/mobile_manipulation_agent</span>
mkdir<span class="w"> </span>data
<span class="nb">cd</span><span class="w"> </span>data
</pre></div>
</div>
<p>Download the necessary model weights from the provided sources and place them in an accessible directory within the
project, put them under data folder. These weights are essential for running models.</p>
<ul class="simple">
<li><p>MobileSAM: Download mobile_sam.pt from the <a class="reference external" href="https://github.com/ChaoningZhang/MobileSAM/blob/master/weights/mobile_sam.pt">MobileSAM GitHub Repository</a>.</p></li>
<li><p>GroundingDINO: Download groundingdino_swint_ogc.pth from
the <a class="reference external" href="https://github.com/IDEA-Research/GroundingDINO/releases/download/v0.1.0-alpha2/groundingdino_swinb_cogcoor.pth">GroundingDINO GitHub Repository</a>.</p></li>
<li><p>YOLOv7: Download yolov7-e6e.pt from the <a class="reference external" href="https://github.com/WongKinYiu/yolov7/releases/download/v0.1/yolov7-e6e.pt">YOLOv7 GitHub Repository</a>.</p></li>
</ul>
<p><strong>NOTE</strong>: Ensure these files are saved in a directory where the code can access them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── mobile_manipulation_agent
│   │   ├── data
│   │   │   ├── groundingdino_swint_ogc.pth
│   │   │   ├── mobile_sam.pt
│   │   │   └── yolov7-e6e.pt
</pre></div>
</div>
</section>
<section id="configure-api-key">
<h4>1.4 Configure API Key<a class="headerlink" href="#configure-api-key" title="Permalink to this heading">¶</a></h4>
<p>Put your api key under <code class="docutils literal notranslate"><span class="pre">./modules/vlm/api_key</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grutopia_extension
├── agents
│   ├── mobile_manipulation_agent
│   │   ├── modules
│   │   │   └── vlm
│   │   │   │   └── api_key
│   │   │   │   │   ├── azure_api_key.txt
│   │   │   │   │   └── azure_api_key_e.txt
</pre></div>
</div>
<p>As mentioned above:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">azure_api_key.txt</span></code>: The API key for the Azure OpenAI <code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code> model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">azure_api_key_e.txt</span></code>: The API key for the Azure OpenAI <code class="docutils literal notranslate"><span class="pre">text-embedding-3-large</span></code> embedding model.</p></li>
</ul>
<p>You can learn how to get the keys through this <a class="reference external" href="https://learn.microsoft.com/zh-cn/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions">link</a>.</p>
</section>
<section id="id3">
<h4>1.5 Run the Agent Process<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<p>Launch the agent process</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># PWD: grutopia_extension/agents/mobile_manipulation_agent</span>
./scripts/launch_vlm_servers.sh
</pre></div>
</div>
</section>
</section>
<section id="generate-episodes-config-for-mobile-manipulation-task">
<h3>2 Generate episodes config for mobile manipulation task<a class="headerlink" href="#generate-episodes-config-for-mobile-manipulation-task" title="Permalink to this heading">¶</a></h3>
<p>A python script <a class="reference external" href="https://github.com/OpenRobotLab/GRUtopia/blob/main/grutopia_extension/agents/mobile_manipulation_agent/generate_mm_episodes.py"><code class="docutils literal notranslate"><span class="pre">generate_mm_episodes.py</span></code></a> is provided to generate episodes config for mobile manipulation task. Currently it generates a python entrypoint file for each episode, since our env does not fully support multiple episodes yet. For example, if there’s 30 episodes to run for the benchmark, 30 python scripts will be generated, and each python script contains the full process to run one episode in simulation Env.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate episodes config for mobile manipulation task</span>
<span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
<span class="nb">cd</span><span class="w"> </span>..
python<span class="w"> </span>GRUtopia/grutopia_extension/agents/mobile_manipulation_agent/generate_mm_episodes.py<span class="w"> </span>--help<span class="w">  </span><span class="c1"># See options when generating episodes config</span>
python<span class="w"> </span>GRUtopia/grutopia_extension/agents/mobile_manipulation_agent/generate_mm_episodes.py
</pre></div>
</div>
<p>If no options are provided, the generated scripts will be saved in <code class="docutils literal notranslate"><span class="pre">./mm_episodes</span></code>. You can override the path when generating (see <code class="docutils literal notranslate"><span class="pre">--help</span></code>).</p>
</section>
<section id="id4">
<h3>3 Run the Episodes in Simulation Env<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<p>Open a new session and switch to the python virtual environment for simulation env, which is the one you created when <a class="reference internal" href="installation.html"><span class="std std-doc">install GRUtopia</span></a>.</p>
<p>First install the dependencies required for running the benchmark:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements/benchmark.txt
</pre></div>
</div>
<p>It may take quite a long time to run all the episodes. You can verify the setting by running the demo episode first:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>PATH/TO/GRUTOPIA/ROOT
<span class="nb">cd</span><span class="w"> </span>..
python<span class="w"> </span>GRUtopia/grutopia/demo/mobile_manipulation.py
</pre></div>
</div>
<p>If the demo episode runs successfully, you can run all the episodes in the benchmark by running all the python scripts generated in step 2. The scripts can also be distributed to different machines and run in parallel as long as the agent process is started on these machines (since currently the two processes can only communicated through localhost…).</p>
<p>Currently, the process and logic of running benchmark baseline is quite rough, and we are continuously working on optimizing it.</p>
</section>
</section>
</section>


              </article>
              
            </div>
            <footer>
  
  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
    
    <a href="../tutorials/how-to-use-controller.html" class="btn btn-neutral float-right" title="How to Use Controller" accesskey="n"
      rel="next">Next <img src="../_static/images/chevron-right-blue.svg"
        class="next-page"></a>
    
    
    <a href="teleoperating-with-visionpro.html" class="btn btn-neutral" title="Teleoperating with VisionPro" accesskey="p"
      rel="prev"><img src="../_static/images/chevron-right-blue.svg" class="previous-page"> Previous</a>
    
  </div>
  

  <hr>

  <div role="contentinfo">
    <p>
      &copy; Copyright 2025, OpenRobotLab.

    </p>
  </div>
  
  <div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a
      href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the
      Docs</a>.
  </div>
   

</footer>
          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Run Benchmark Baseline</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#social-navigation">Social Navigation</a><ul>
<li><a class="reference internal" href="#start-baseline-agent-for-social-navigation-benchmark">1 Start Baseline Agent For Social Navigation Benchmark</a><ul>
<li><a class="reference internal" href="#install-dependencies-for-agent">1.1 Install Dependencies for Agent</a></li>
<li><a class="reference internal" href="#install-submodules">1.2 Install Submodules</a></li>
<li><a class="reference internal" href="#download-model-weights">1.3 Download Model Weights</a></li>
<li><a class="reference internal" href="#configure-api-keys">1.4 Configure API Keys</a></li>
<li><a class="reference internal" href="#run-the-agent-process">1.5 Run the Agent Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-episodes-config-for-social-navigation-task">2. Generate episodes config for social navigation task</a></li>
<li><a class="reference internal" href="#run-the-episodes-in-simulation-env">3 Run the Episodes in Simulation Env</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mobile-manipulation">Mobile Manipulation</a><ul>
<li><a class="reference internal" href="#start-baseline-agent-for-mobile-manipulation-benchmark">1 Start Baseline Agent For Mobile Manipulation Benchmark</a><ul>
<li><a class="reference internal" href="#install-environment-dependencies">1.1 Install Environment Dependencies</a></li>
<li><a class="reference internal" href="#id1">1.2 Install Submodules</a></li>
<li><a class="reference internal" href="#id2">1.3 Download Model Weights</a></li>
<li><a class="reference internal" href="#configure-api-key">1.4 Configure API Key</a></li>
<li><a class="reference internal" href="#id3">1.5 Run the Agent Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-episodes-config-for-mobile-manipulation-task">2 Generate episodes config for mobile manipulation task</a></li>
<li><a class="reference internal" href="#id4">3 Run the Episodes in Simulation Env</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
    </section>
  </div>

  


  

  
  <script type="text/javascript" id="documentation_options" data-url_root="../"
    src="../_static/documentation_options.js"></script>
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
  <script src="../_static/doctools.js"></script>
  <script src="../_static/sphinx_highlight.js"></script>
  <script src="../_static/clipboard.min.js"></script>
  <script src="../_static/copybutton.js"></script>
  

  

  <script type="text/javascript" src="../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <div class="container-fluid docs-tutorials-resources" id="docs-tutorials-resources">
  </div>

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="" aria-label="OpenRobotLab"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://github.com/OpenRobotLab/GRUtopia.git" target="_blank">GitHub</a>
          </li>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function (e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>

</html>